!function(){"use strict";var n,t,e,r,o;!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(n,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),e}}(),function(n){n.TRACKING_LOADED="trackingConsentLoaded",n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.TRACKING_RESET="trackingConsentReset"}(n||(n={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(t||(t={})),function(n){n.NO_INTERACTION="no_interaction",n.NO_VALUE="",n.ACCEPTED="1",n.DECLINED="0"}(e||(e={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(r||(r={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR",n.GDPR_BLOCK_ALL="GDPR_BLOCK_ALL",n.CCPA="CCPA"}(o||(o={}));var i=["prefs","version","consent","regulation"],c=["lim","v","con","reg"];function u(n,t){var e=t.slice().sort();return n.length===t.length&&n.slice().sort().every((function(n,t){return n===e[t]}))}function C(){try{var n=document.cookie?document.cookie.split("; "):[],t=void 0;if(n.forEach((function(n){var e=n.split("="),r=e[0],o=e[1];if("_tracking_consent"===decodeURIComponent(r)){var i=JSON.parse(decodeURIComponent(o));t=i}})),void 0===t||(e=t,!u(r=Object.keys(e),c)&&!u(r,i)))return;return function(n){if(n.hasOwnProperty("version"))return!0;if(n.hasOwnProperty("v"))return!1}(t)&&(t=function(n){var t=n.prefs.limit,e=n.regulation,r=n.version,i={};(function(n){return n.prefs.limit.includes(o.GDPR)})(n)&&(i={GDPR:l(n.consent)});return{con:i,reg:e,v:r,lim:t}}(t)),t}catch(n){return}var e,r}function s(){var n=C();return f(n)?e.NO_VALUE:n.con.GDPR}function a(){var n=C();return f(n)?e.NO_VALUE:n.con.CCPA}function f(n){return void 0===n&&(n=null),null===n&&(n=C()),void 0===n}function l(n){switch(n){case t.ACCEPTED:return e.ACCEPTED;case t.DECLINED:return e.DECLINED;default:return e.NO_VALUE}}var E={GDPR:[o.GDPR,o.GDPR_BLOCK_ALL],CCPA:[o.CCPA_BLOCK_ALL,o.CCPA]};function A(n,t,e){void 0===e&&(e=void 0);var r=new XMLHttpRequest,o="https://"+document.location.host+"/set_tracking_consent.json",i=JSON.stringify(n);r.open("POST",o,!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===r.readyState){var n,o=0===r.status||200>=r.status&&r.status<400;try{n=JSON.parse(r.responseText)}catch(t){n={error:"Unknown error"}}o?(e&&document.dispatchEvent(new CustomEvent(e,{detail:{}})),t(null,n)):t(n)}},r.send(i)}function P(t,e){if(f()){var r="Shop is not configured to block privacy regulation in online store settings.";return console.warn(r),e({error:r})}if("boolean"!=typeof t)throw TypeError("setTrackingConsent must be called with a boolean consent value");if("function"!=typeof e)throw TypeError("setTrackingConsent must be called with a callback function");return A({consent:t},e,t?n.TRACKING_ACCEPTED:n.TRACKING_DECLINED)}function d(n,t){if("boolean"!=typeof n)throw TypeError("setCCPAConsent must be called with a boolean consent value");if("function"!=typeof t)throw TypeError("setCCPAConsent must be called with a callback function");return A({ccpa_consent:n},t)}function D(n){return f()?t.NO_VALUE:n===e.NO_VALUE?t.NO_INTERACTION:function(n){switch(n){case e.ACCEPTED:return t.ACCEPTED;case e.DECLINED:return t.DECLINED;default:return t.NO_VALUE}}(n)}function L(){return D(s())}function N(){var n,t=f(n=C())?r.NO_VALUE:n.reg;return t in r?t:r.NO_VALUE}function _(){return f(n=C())?{limit:[]}:{limit:n.lim};var n}function v(){var n=N();if(n===r.NO_VALUE)return!1;var t=_();return 0!==t.limit.length&&t.limit.some((function(t){return function(n,t){return E[n].includes(t)}(n,t)}))}function O(){return!!f()||function(){if(!p(o.GDPR)&&!p(o.GDPR_BLOCK_ALL))return!0;switch(s()){case e.ACCEPTED:return!0;case e.DECLINED:return!1;case e.NO_VALUE:return N()!==r.GDPR}}()}function p(n){return _().limit.includes(n)}function T(){return!!f()||!1!==O()&&(p(o.CCPA_BLOCK_ALL)?N()!==r.CCPA:!p(o.CCPA)||a()!==e.DECLINED)}function R(){return N()===r.GDPR&&v()&&L()===t.NO_INTERACTION}function h(){return D(a())}function w(){return N()===r.CCPA&&_().limit.includes(o.CCPA)&&h()===t.NO_INTERACTION}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent={getTrackingConsent:L,setTrackingConsent:P,userCanBeTracked:O,getRegulation:N,isRegulationEnforced:v,getShopPrefs:_,shouldShowGDPRBanner:R,userDataCanBeSold:T,setCCPAConsent:d,getCCPAConsent:h,shouldShowCCPABanner:w}}();
